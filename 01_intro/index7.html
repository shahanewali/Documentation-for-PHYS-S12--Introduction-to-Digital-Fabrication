<!DOCTYPE html>
<html lang="en">
<head>
  <style>
    body {
      background-color: #f1f1f1;
      font-family: "Courier New", Courier, monospace;
      padding: 20px;
    }

    pre {
      background-color: #fff;
      border: 1px solid #ddd;
      padding: 10px;
      white-space: pre-wrap;
      word-wrap: break-word;
      line-height: 1.5;
      font-size: 14px;
      color: #333;
      overflow: auto;
    }
  </style>
</head>

<title>PHYS S-12: Intro to Digital Fabrication </title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="../style.css" rel="stylesheet">


<nav class="navbar navbar-expand-sm navbar-light bg-light">
  <div style="align-items: left; justify-content:left;" class="container-fluid">
    <h3 class="nav-title"> Shahane Waliullah PHYS S-12: Intro to Digital Fabrication</h3>
    <div class="navbar-nav">
      <h4></h4>
      <h4><a class="nav-link" href="../index.html">Home</a></h4>
      <h4><a class="nav-link" href="../about.html">About</a></h4>
    </div>
  </div>
</nav>

<body>


<xmp style="display:none;">
<br> 

#### Week 7: Output Devices

<i> Assignment:
Use an output device that you haven't used before today.
Write a microcontroller program that integrates at least one input device and one output device. Avoid the delay() function and use the C++ class structure.
Use an oscilloscope to discover the time domain at which your output device is operating. Is it on a fixed clock? What's its speed? Share images and describe your findings.
Prepare CAD files for CNC (next class). Consider either 2D DXF files for routing sheet material (like plywood or OSB), or 3D STL files to mill out a (2.5D) shape. We will also cover molding & casting, so you may want to consider milling a mold. </i>
And here is a <a href="https://nathanmelenbrink.github.io/intro-dig-fab/08_output/index.html">Link to the original assignment page</a>

<p>This week, I first had fun with the RGB led and I also used the OLED screen a little.</p>
<h2> RGB LED</h2>
<p>Let's start with the RGB LED. Here's a circuit diagram.I used 220 Ohms resistors.</p>
<img src="schemacircuitledRGB.png" alt="Image" style="width:500px;height:400px;"/>
<p>First, I used the code given in the course.</p>
<pre>
  <code class="language-arduino">
void setup() {
  pinMode(9, OUTPUT);   // red
  pinMode(10, OUTPUT);  // green
  pinMode(11, OUTPUT);  // blue  
}

void loop() {
 digitalWrite(9, HIGH);   // turn on red channel
 delay(500);              // delay 
 digitalWrite(10, HIGH);  // turn on green channel
 delay(500);              // delay
 digitalWrite(11, HIGH);  // turn on green channel
 delay(500);              // delay
 digitalWrite(9, LOW);    // turn off red channel
 digitalWrite(10, LOW);   // turn off green channel
 digitalWrite(11, LOW);   // turn off blue channel
 delay(3000);             // delay
}
    </code>
  </pre>
<video width="600" height="400" controls autoplay>
      <source src="RGBledessai1.mp4" type=video/mp4>
    </video>

  <p>The next step was to try to control each color channel independently but first I wanted to see a color gradient on my led. I used this code for this.</p>
  <pre>
  <code class="language-arduino">
// Pin definitions
const int redPin = 9;
const int greenPin = 10;
const int bluePin = 11;

void setup() {
  // Configure pins as output
  pinMode(redPin, OUTPUT);
  pinMode(greenPin, OUTPUT);
  pinMode(bluePin, OUTPUT);
}

void loop() {
  // Variation of color components
  for (int i = 0; i < 256; i++) {
    // Red component
    analogWrite(redPin, i);
    delay(5);

    // Green component
    analogWrite(greenPin, 255 - i);
    delay(5);

    // Blue component
    analogWrite(bluePin, 0);
    delay(5);
  }

  for (int i = 0; i < 256; i++) {
    // Red component
    analogWrite(redPin, 255 - i);
    delay(5);

    // Green component
    analogWrite(greenPin, 0);
    delay(5);

    // Blue component
    analogWrite(bluePin, i);
    delay(5);
  }

  for (int i = 0; i < 256; i++) {
    // Red component
    analogWrite(redPin, 0);
    delay(5);

    // Green component
    analogWrite(greenPin, i);
    delay(5);

    // Blue component
    analogWrite(bluePin, 255 - i);
    delay(5);
  }
}
    </code>
  </pre>
<video width="600" height="400" controls autoplay>
      <source src="RGBledgradient.mp4" type=video/mp4>
    </video>
<p>Finally, to be able to control each color channel independently, I used potentiometers and PWM.
<img src="schemacircuitledRGB2.png" alt="Image" style="width:600px;height:400px;"/>
<pre>
  <code class="language-arduino">
int RGBLED_RedPin = 9;
int RGBLED_GreenPin = 10;
int RGBLED_BluePin = 11;
int Previous_PWMValue_RedPin = 0;
int Threshold_PWMValue_RedPin = 0;
int Previous_PWMValue_GreenPin = 0;
int Threshold_PWMValue_GreenPin = 0;
int Previous_PWMValue_BluePin = 0;
int Threshold_PWMValue_BluePin = 0;

void setup()
{
  Serial.begin(9600); // initialize serial communications at 9600 bps
  pinMode(RGBLED_RedPin, OUTPUT);
  pinMode(RGBLED_GreenPin, OUTPUT);
  pinMode(RGBLED_BluePin, OUTPUT);
}

void loop()
{
  int Pot_RedPin = analogRead(A0);
  int PWMValue_RedPin = Pot_RedPin / 4;
  int Pot_GreenPin = analogRead(A1);
  int PWMValue_GreenPin = Pot_GreenPin / 4;
  int Pot_BluePin = analogRead(A2);
  int PWMValue_BluePin = Pot_BluePin / 4;

  analogWrite(RGBLED_RedPin, PWMValue_RedPin);
  analogWrite(RGBLED_GreenPin, PWMValue_GreenPin);
  analogWrite(RGBLED_BluePin, PWMValue_BluePin);

  Threshold_PWMValue_RedPin = abs(Pot_RedPin - Previous_PWMValue_RedPin);
  Threshold_PWMValue_GreenPin = abs(Pot_GreenPin - Previous_PWMValue_GreenPin);
  Threshold_PWMValue_BluePin = abs(Pot_BluePin - Previous_PWMValue_BluePin);

  if (Threshold_PWMValue_RedPin >= 10 || Threshold_PWMValue_GreenPin >= 10 || Threshold_PWMValue_BluePin >= 10)
  {
    Serial.print("RGB (");
    Serial.print(PWMValue_RedPin);
    Serial.print(", ");
    Serial.print(PWMValue_GreenPin);
    Serial.print(", ");
    Serial.print(PWMValue_BluePin);
    Serial.println(") ");
  }

  Previous_PWMValue_RedPin = Pot_RedPin;
  Previous_PWMValue_GreenPin = Pot_GreenPin;
  Previous_PWMValue_BluePin = Pot_BluePin;

  delay(2);
}

    </code>
  </pre>
<video width="300" height="500" controls autoplay>
      <source src="RGBledpotentiometre.mp4" type=video/mp4>
    </video>
<p>we can't see much on the video unfortunately.</p>


</xmp>
</body>

<script src="../strapdown.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" ></script>

</html>